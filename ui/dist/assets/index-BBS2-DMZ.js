import{a}from"./announcements-BELDLkia.js";import{L as h}from"./LoadingWithResultModal-vR9ArRhE.js";import{e as k,f as b,i as x,c as _,b as S,a as t,j as C,t as i,d as r,w as E,r as w,o as U,_ as L}from"./index-CwD2Tyys.js";const M={class:"user-management"},D={key:0,class:"stats"},N={class:"card"},H={class:"card"},V={class:"card"},B={class:"config"},T={class:"config-option"},I={class:"config-option"},$={class:"config-option"},j=k({__name:"index",setup(G){const e=b(null),n=b(null),u=async d=>{const s=document.createElement("input");s.type="file",s.accept=".csv",s.onchange=async()=>{var c,f,v,g,y;if((c=e.value)==null||c.onLoading(),!s.files||s.files.length===0)return;const o=await s.files[0].text(),m=o.split(`
`)[0];let l=null;if(d==="students"){if(!m.includes("Nachname")){(f=e.value)==null||f.onError("This format is unsupported.");return}l=await a.db.updateStudents(o)}else if(d==="modules"){if(!m.includes("Modultyp")){(v=e.value)==null||v.onError("This format is unsupported.");return}l=await a.db.updateModules(o)}l?(y=e.value)==null||y.onError(l):(g=e.value)==null||g.onSuccess("Successfully updated!")},s.click()};return x(async()=>{n.value=await a.db.students()}),(d,s)=>{const p=w("router-link");return U(),_("main",null,[S(h,{ref_key:"modal",ref:e},null,512),s[12]||(s[12]=t("h1",null,"User Management",-1)),t("div",M,[n.value?(U(),_("div",D,[t("div",N,[t("h1",null,i(n.value.enrolled),1),s[2]||(s[2]=t("p",null,"HSLU-I Students",-1))]),t("div",H,[t("h1",null,i(n.value.discord.students),1),s[3]||(s[3]=t("p",null,"Students on Discord",-1))]),t("div",V,[t("h1",null,i(n.value.discord.graduates),1),s[4]||(s[4]=t("p",null,"Graduates on Discord",-1))])])):C("",!0),s[11]||(s[11]=t("h2",null,"Configuration",-1)),t("div",B,[t("div",T,[s[6]||(s[6]=t("div",{class:"info"},[t("h3",null,"Update Students"),t("p",null," Update the list of students that is provided by the HSLU administration. ")],-1)),t("button",{class:"secondary",onClick:s[0]||(s[0]=o=>u("students"))},s[5]||(s[5]=[t("span",{class:"material-symbols-rounded"},"file_upload",-1),r(" Update ")]))]),t("div",I,[s[8]||(s[8]=t("div",{class:"info"},[t("h3",null,"Update Modules"),t("p",null," Update the list of modules that is provided by the HSLU administration. ")],-1)),t("button",{class:"secondary",onClick:s[1]||(s[1]=o=>u("modules"))},s[7]||(s[7]=[t("span",{class:"material-symbols-rounded"},"file_upload",-1),r(" Update ")]))]),t("div",$,[s[10]||(s[10]=t("div",{class:"info"},[t("h3",null,"Edit Degree Programmes"),t("p",null," Edit the mapping between the HSLU degree programmes and the Discord roles & channels. ")],-1)),S(p,{to:"/discord/degree-programmes",class:"secondary"},{default:E(()=>s[9]||(s[9]=[t("button",{class:"secondary"},[t("span",{class:"material-symbols-rounded"},"edit"),r(" Edit ")],-1)])),_:1})])])])])}}}),q=L(j,[["__scopeId","data-v-0497aa2b"]]);export{q as default};
