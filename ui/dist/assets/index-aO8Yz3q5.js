import{a as c}from"./announcements-BG9dsM8G.js";import{L as w}from"./LoadingWithResultModal-CFFGj8wt.js";import{f as x,g as S,j as C,r as E,o as b,c as U,b as k,a as s,t as r,m as L,e as u,w as M,p as D,d as I,_ as N}from"./index-l-IJye0p.js";const t=d=>(D("data-v-893afdd7"),d=d(),I(),d),H=t(()=>s("h1",null,"User Management",-1)),V={class:"user-management"},B={key:0,class:"stats"},T={class:"card"},$=t(()=>s("p",null,"HSLU-I Students",-1)),j={class:"card"},G=t(()=>s("p",null,"Students on Discord",-1)),P={class:"card"},R=t(()=>s("p",null,"Graduates on Discord",-1)),W=t(()=>s("h2",null,"Configuration",-1)),q={class:"config"},z={class:"config-option"},A=t(()=>s("div",{class:"info"},[s("h3",null,"Update Students"),s("p",null," Update the list of students that is provided by the HSLU administration. ")],-1)),F=t(()=>s("span",{class:"material-symbols-rounded"},"file_upload",-1)),J={class:"config-option"},K=t(()=>s("div",{class:"info"},[s("h3",null,"Update Modules"),s("p",null," Update the list of modules that is provided by the HSLU administration. ")],-1)),O=t(()=>s("span",{class:"material-symbols-rounded"},"file_upload",-1)),Q={class:"config-option"},X=t(()=>s("div",{class:"info"},[s("h3",null,"Edit Degree Programmes"),s("p",null," Edit the mapping between the HSLU degree programmes and the Discord roles & channels. ")],-1)),Y=t(()=>s("button",{class:"secondary"},[s("span",{class:"material-symbols-rounded"},"edit"),u(" Edit ")],-1)),Z=x({__name:"index",setup(d){const o=S(null),n=S(null),p=async i=>{const e=document.createElement("input");e.type="file",e.accept=".csv",e.onchange=async()=>{var m,f,v,g,y;if((m=o.value)==null||m.onLoading(),!e.files||e.files.length===0)return;const a=await e.files[0].text(),h=a.split(`
`)[0];let l=null;if(i==="students"){if(!h.includes("Nachname")){(f=o.value)==null||f.onError("This format is unsupported.");return}l=await c.db.updateStudents(a)}else if(i==="modules"){if(!h.includes("Modultyp")){(v=o.value)==null||v.onError("This format is unsupported.");return}l=await c.db.updateModules(a)}l?(y=o.value)==null||y.onError(l):(g=o.value)==null||g.onSuccess("Successfully updated!")},e.click()};return C(async()=>{n.value=await c.db.students()}),(i,e)=>{const _=E("router-link");return b(),U("main",null,[k(w,{ref_key:"modal",ref:o},null,512),H,s("div",V,[n.value?(b(),U("div",B,[s("div",T,[s("h1",null,r(n.value.enrolled),1),$]),s("div",j,[s("h1",null,r(n.value.discord.students),1),G]),s("div",P,[s("h1",null,r(n.value.discord.graduates),1),R])])):L("",!0),W,s("div",q,[s("div",z,[A,s("button",{class:"secondary",onClick:e[0]||(e[0]=a=>p("students"))},[F,u(" Update ")])]),s("div",J,[K,s("button",{class:"secondary",onClick:e[1]||(e[1]=a=>p("modules"))},[O,u(" Update ")])]),s("div",Q,[X,k(_,{to:"/discord/degree-programmes",class:"secondary"},{default:M(()=>[Y]),_:1})])])])])}}}),os=N(Z,[["__scopeId","data-v-893afdd7"]]);export{os as default};
