import{e as D,f as m,g as _,h as b,i as V,c as l,a as e,j as S,k as A,v as $,d as f,F as B,l as E,t as u,u as I,r as F,o as i,b as L,w as O,_ as j}from"./index-CVy1XDq-.js";import{u as G,a as P}from"./announcements-kHplyhKP.js";const R=(v,c)=>{var a=!1;return function(){a||(v(),a=!0,setTimeout(function(){a=!1},c))}},U=(v,c)=>{var a;return function(){clearTimeout(a),a=setTimeout(()=>{v()},c)}},Z={class:"root"},q={class:"announcements"},z={class:"filters"},H=["aria-checked","title"],J={key:0,class:"itemlist"},K={key:0},Q={key:1},W={key:1,class:"pagination"},X={class:"pager"},Y=["disabled"],ee=["disabled"],g=8,ne=D({__name:"Overview",setup(v){const c=G(),a=I(),h=m(0),o=m(0),r=m([]);_(()=>{var t;return(t=r.value)==null?void 0:t[0]});const N=async()=>{const t=await c.create();a.push(t)},p=m(""),d=m(!1),w=async()=>{const{items:t,totalCount:n}=await P.announements.search(p.value,d.value,void 0,g,M.value);r.value=t,h.value=n},y=R(w,500),x=U(w,500);b(p,()=>{o.value=0,x()}),b(d,()=>{o.value=0,y()});const k=_(()=>Math.ceil(h.value/g)),M=_(()=>o.value*g),C=t=>{t<0||t>=k.value||(o.value=t,y())};return V(()=>{y()}),(t,n)=>{const T=F("router-link");return i(),l("main",null,[e("div",Z,[n[12]||(n[12]=e("h1",null,"Announcements",-1)),e("div",q,[e("div",{class:"cards"},[e("div",{class:"card",onClick:N},n[4]||(n[4]=[e("div",{class:"icon"},[e("span",{class:"material-symbols-rounded"}," add ")],-1),e("h3",null,"New Announcement",-1),e("p",null,"Create a new announcement from scratch!",-1)])),n[5]||(n[5]=e("div",{class:"card",disabled:"true","data-hide-mobile":""},[e("div",{class:"icon"},[e("span",{class:"material-symbols-rounded"}," construction ")]),e("h3",null,"Not yet implemented"),e("p",null," post one-time announcements on Discord, edit sent announcements & more ")],-1))]),e("div",z,[A(e("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=s=>p.value=s),placeholder:"Search..."},null,512),[[$,p.value]]),e("label",{onClick:n[1]||(n[1]=s=>d.value=!d.value),"aria-checked":d.value,title:d.value?"Show all":"Show only announcements I last modified"},n[6]||(n[6]=[e("span",{class:"material-symbols-rounded"}," person ",-1),f(" My announcements ")]),8,H)]),r.value.length?(i(),l("div",J,[n[8]||(n[8]=e("div",{class:"announcement"},[e("a",null,[e("span",null,"Name"),e("span",null,"Date modified"),e("span",null,"Modified by")])],-1)),(i(!0),l(B,null,E(r.value,s=>(i(),l("div",{key:s.id,class:"announcement"},[L(T,{to:`/announcements/${s.id}`},{default:O(()=>[s.title?(i(),l("h3",K,u(s.title),1)):(i(),l("h3",Q,n[7]||(n[7]=[e("i",null,"N/A",-1)]))),e("span",null,u(new Date(s.lastModified).toLocaleString()),1),e("span",null,u(s.author),1)]),_:2},1032,["to"])]))),128))])):S("",!0),r.value.length?(i(),l("div",W,[e("span",null,[n[9]||(n[9]=f(" Showing ")),e("strong",null,u(r.value.length),1),n[10]||(n[10]=f(" of ")),e("strong",null,u(h.value),1),n[11]||(n[11]=f(" announcements "))]),e("div",X,[e("span",{class:"material-symbols-rounded",disabled:o.value===0,onClick:n[2]||(n[2]=s=>C(o.value-1))}," chevron_left ",8,Y),e("span",null,"Page "+u(o.value+1)+" of "+u(k.value),1),e("span",{class:"material-symbols-rounded",disabled:o.value===k.value-1,onClick:n[3]||(n[3]=s=>C(o.value+1))}," chevron_right ",8,ee)])])):S("",!0)])])])}}}),oe=j(ne,[["__scopeId","data-v-c4c87401"]]);export{oe as default};
