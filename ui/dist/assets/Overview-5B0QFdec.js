import{f as I,u as V,g as _,h as g,i as b,j as A,r as $,o as i,c as u,a as e,k as B,v as E,e as p,F,l as L,m as N,t as d,b as O,w as j,p as G,d as P,_ as R}from"./index-l-IJye0p.js";import{u as U,a as Z}from"./announcements-BG9dsM8G.js";const q=(a,v)=>{var l=!1;return function(){l||(a(),l=!0,setTimeout(function(){l=!1},v))}},z=(a,v)=>{var l;return function(){clearTimeout(l),l=setTimeout(()=>{a()},v)}},c=a=>(G("data-v-9f04678c"),a=a(),P(),a),H={class:"root"},J=c(()=>e("h1",null,"Announcements",-1)),K={class:"announcements"},Q=c(()=>e("div",{class:"icon"},[e("span",{class:"material-symbols-rounded"}," add ")],-1)),W=c(()=>e("h3",null,"New Announcement",-1)),X=c(()=>e("p",null,"Create a new announcement from scratch!",-1)),Y=[Q,W,X],ee=c(()=>e("div",{class:"card",disabled:"true","data-hide-mobile":""},[e("div",{class:"icon"},[e("span",{class:"material-symbols-rounded"}," construction ")]),e("h3",null,"Not yet implemented"),e("p",null," post one-time announcements on Discord, edit sent announcements & more ")],-1)),te={class:"filters"},ne=["aria-checked","title"],se=c(()=>e("span",{class:"material-symbols-rounded"}," person ",-1)),oe={key:0,class:"itemlist"},ae=c(()=>e("div",{class:"announcement"},[e("a",null,[e("span",null,"Name"),e("span",null,"Date modified"),e("span",null,"Modified by")])],-1)),le={key:0},ce={key:1},ie=c(()=>e("i",null,"N/A",-1)),ue=[ie],de={key:1,class:"pagination"},re={class:"pager"},me=["disabled"],ve=["disabled"],w=8,_e=I({__name:"Overview",setup(a){const v=U(),l=V(),f=_(0),o=_(0),r=_([]);g(()=>{var t;return(t=r.value)==null?void 0:t[0]});const x=async()=>{const t=await v.create();l.push(t)},h=_(""),m=_(!1),C=async()=>{const{items:t,totalCount:s}=await Z.announements.search(h.value,m.value,void 0,w,T.value);r.value=t,f.value=s},y=q(C,500),M=z(C,500);b(h,()=>{o.value=0,M()}),b(m,()=>{o.value=0,y()});const k=g(()=>Math.ceil(f.value/w)),T=g(()=>o.value*w),S=t=>{t<0||t>=k.value||(o.value=t,y())};return A(()=>{y()}),(t,s)=>{const D=$("router-link");return i(),u("main",null,[e("div",H,[J,e("div",K,[e("div",{class:"cards"},[e("div",{class:"card",onClick:x},Y),ee]),e("div",te,[B(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=n=>h.value=n),placeholder:"Search..."},null,512),[[E,h.value]]),e("label",{onClick:s[1]||(s[1]=n=>m.value=!m.value),"aria-checked":m.value,title:m.value?"Show all":"Show only announcements I last modified"},[se,p(" My announcements ")],8,ne)]),r.value.length?(i(),u("div",oe,[ae,(i(!0),u(F,null,L(r.value,n=>(i(),u("div",{key:n.id,class:"announcement"},[O(D,{to:`/announcements/${n.id}`},{default:j(()=>[n.title?(i(),u("h3",le,d(n.title),1)):(i(),u("h3",ce,ue)),e("span",null,d(new Date(n.lastModified).toLocaleString()),1),e("span",null,d(n.author),1)]),_:2},1032,["to"])]))),128))])):N("",!0),r.value.length?(i(),u("div",de,[e("span",null,[p(" Showing "),e("strong",null,d(r.value.length),1),p(" of "),e("strong",null,d(f.value),1),p(" announcements ")]),e("div",re,[e("span",{class:"material-symbols-rounded",disabled:o.value===0,onClick:s[2]||(s[2]=n=>S(o.value-1))}," chevron_left ",8,me),e("span",null,"Page "+d(o.value+1)+" of "+d(k.value),1),e("span",{class:"material-symbols-rounded",disabled:o.value===k.value-1,onClick:s[3]||(s[3]=n=>S(o.value+1))}," chevron_right ",8,ve)])])):N("",!0)])])])}}}),fe=R(_e,[["__scopeId","data-v-9f04678c"]]);export{fe as default};
